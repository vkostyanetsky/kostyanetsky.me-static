<rss version="2.0">
    <channel>    
        <title>Vlad Kostyanetsky</title>
        <description>Hello! My name is Vlad, I'm business app developer.</description>
        <language>en</language>
        <link>https://kostyanetsky.me</link>
        <lastBuildDate>Mon, 17 Nov 2025 13:26:00 +0700</lastBuildDate>
        
        <item>
            <title>Well, There Are Some</title>
            <link>https://kostyanetsky.me/notes/well-there-are-some</link>
            <guid isPermaLink="false">note-well-there-are-some</guid>
            <pubDate>Mon, 17 Nov 2025 13:26:00 +0700</pubDate>
            <description><p>I'm out for a walk in the evening, and behind me there's some mom and her little kid — about five years old, I guess. I don't see them, I just hear them talking. The mom is explaining university to the kid: that you have to get in, study, there will be exams and all that.</p>
<p>The boy is quiet for a bit, then says sadly:</p>
<p>— I thought there was only school, but it turns out there are more difficulties too...</p></description>
        </item>
        
        <item>
            <title>Harmless Harm</title>
            <link>https://kostyanetsky.me/notes/harmless-harm</link>
            <guid isPermaLink="false">note-harmless-harm</guid>
            <pubDate>Sun, 16 Nov 2025 10:36:00 +0700</pubDate>
            <description><p>The other day my colleague and I were debugging an issue, nothing fancy, just another "why is this query behaving weird?" moment.</p>
<p>Simplified, the idea was: we read a table from the database and dump the result into a temp table. If a certain condition is met, we still want the temp table to be created, but it must be empty (regardless of whether the source table has rows or not).</p>
<p>The query looked roughly like this:</p>
<pre>
SELECT
    Table.Field1 AS Field1
FROM
    Table AS Table
WHERE 
    &amp;Parameter
</pre>
<p>If we needed to copy rows from the source table into the temp table, we passed TRUE into the parameter; if we wanted the temp table to be empty, we passed FALSE.</p>
<p>Looks simple at first glance, but this trick is a silent performance foot-gun if the table being read is large.</p>
<p>The reason is how DB engines work with parameterized queries. Both MS SQL and PostgreSQL build the execution plan based on the query text, and in this example the parameter value does <strong>not</strong> affect the decision of whether the table should be read or not.</p>
<p>As a result, when this query runs, both engines will pedantically scan the whole table (or its index), even if the parameter is FALSE. In that case each row is just discarded, so the logic is technically correct, but we're wasting resources on a pointless scan and polluting the buffer cache, slowing down the system overall and diligently contributing to global warming :)</p>
<p>The fix is simple: inline TRUE/FALSE in the query body as a constant instead of using a parameter. Or use TOP so the query text is even simpler:</p>
<pre>
SELECT TOP 0
    Table.Field1 AS Field1
FROM
    Table AS Table
</pre>
<p>At the SQL level this turns into something like "SELECT TOP 0 ... FROM Table" for MS SQL and "SELECT ... FROM Table LIMIT 0" for PostgreSQL. The final plan will still contain a read operator, but the executor won't actually request any rows, so there's no real data scan (yay).</p>
<p>P.S. If you don't care about having proper column types in the temp table, you can even do this:</p>
<pre>
SELECT TOP 0
    UNDEFINED AS Field1
</pre>
<p>The performance gain, however, is so tiny that it's probably not worth over-optimizing for this. There are better hills to die on.</p></description>
        </item>
        
        <item>
            <title>Voodoo</title>
            <link>https://kostyanetsky.me/notes/voodoo</link>
            <guid isPermaLink="false">note-voodoo</guid>
            <pubDate>Sun, 05 Oct 2025 23:54:12 +0700</pubDate>
            <description><p>Looks like we finally caught our first lab-reproducible case of platform cache corruption. Short synopsis:</p>
<ul>
<li>Spin up a fresh app from the v35 template of <a href="https://firstbit.ae" target="_blank">our ERP</a>.</li>
<li>Run it and wait for initialization to finish.</li>
<li>Swap the app configuration to the v36 release (specifically build 28537 from the dev repo) and run it again.</li>
</ul>
<p>After this super simple sequence, about half the team sees the platform suddenly lose one of the enums. And it's annoyingly selective: hit an enum value on the client — all good; do the same on the server — boom, exception.</p>
<p>Same story with the manager module of one catalog: its methods exist and are exported, but after the update the platform pretends they don't and throw an exception when you call them.</p>
<p><a href="https://x.com/EffinBirds/status/1970264357427704080" target="_blank"><img alt="Welcome To Dipshit Central" src="https://kostyanetsky.me/notes/voodoo/welcome.jpg"/></a></p>
<p>As always, when the magic blooms — look at the cache. Clear it and symptoms vanish. There are indirect hints too:</p>
<ul>
<li>The enum did exist in v35, but it was renamed in v36.</li>
<li>Those manager-module methods didn't exist in v35 (they were added in v36).</li>
</ul>
<p>So the v35 cache didn't contain either of these in their v36 identities, yet for some reason the platform insists on digging into that old cache.</p>
<p>We still don't have a clean root cause. We traced it to a specific commit after which the bug started showing up, but the only weird thing there its <a href="https://kostyanetsky.me/notes/voodoo/the-commit.png" target="_blank">its name</a> (and honestly, there are nearby commits that look even <a href="https://kostyanetsky.me/notes/voodoo/the-other-commit.png" target="_blank">more suspicious</a> from this point of view). The rest were <a href="https://kostyanetsky.me/notes/voodoo/5ba6ac0956e0cc7bc6b520e5110420e6950478fe.diff" target="_blank">minor changes</a> that regenerate internal metadata IDs in the manifest. Yes, those IDs are tied to cache keys, but they get bumped on any metadata change and have never caused issues before.</p>
<p>If you landed here from Google because you hit the same mess — make a no-op change to the problematic object so the platform refreshes the metadata IDs in the manifest. For example, add an empty method or even just a space in the module. That fixes the configuration so the recipe at the top stops corrupting the cache.</p>
<p>Voodoo, sure — but hey, it works ¯\_(ツ)_/¯</p></description>
        </item>
        
        <item>
            <title>Slow Removal of Fresh Areas</title>
            <link>https://kostyanetsky.me/notes/data-history-missing-indexes</link>
            <guid isPermaLink="false">note-data-history-missing-indexes</guid>
            <pubDate>Sun, 03 Aug 2025 16:25:35 +0700</pubDate>
            <description><p>A colleague noticed that on one of our Fresh instances, deleting data areas had become painfully slow. Dug into the metrics:</p>
<pre>
DELETE FROM T1
FROM _DataHistoryMetadata T1
WHERE 
    T1._MetadataId = ?
    AND T1._IsActual = 0x00 
    AND NOT (
        T1._MetadataVersionNumber IN (
            SELECT T2._MetadataVersionNumber AS MetadataVersionNumber_
            FROM _DataHistoryVersions T2
            WHERE T2._HistoryDataId IN (
                SELECT DataHistoryLatestVersions1.DataHistoryLatestVersions._HistoryDataId AS HistoryDataId_
                FROM DataHistoryLatestVersions1.DataHistoryLatestVersions T3
                WHERE DataHistoryLatestVersions1.DataHistoryLatestVersions._MetadataId = ?
            )
        )
    )
</pre>
<p>Each of these queries was reading around 20GB. What's happening is mostly clear: the platform is trying to delete an area's data history, but the janky DB query causes a full scan over the whole history table across all areas instead of using an index. Someone on Dmitrovskaya got lazy again.</p>
<p><a href="https://x.com/EffinBirds/status/1945545263407301033" target="_blank"><img alt="Why are you surpised?" src="https://kostyanetsky.me/notes/data-history-missing-indexes/why.png"/></a></p>
<p>So we were losing between 30 seconds and a half an hour per operation. Wanted it faster. Fix:</p>
<pre>
CREATE NONCLUSTERED INDEX IX_DataHistoryLatestVersions1_MetadataId
  ON dbo._DataHistoryLatestVersions1 (_MetadataId)
  INCLUDE (_HistoryDataId)
  WITH (DROP_EXISTING = OFF, ONLINE = OFF);

CREATE NONCLUSTERED INDEX IX_DataHistoryVersions_MetadataVersionNumber
  ON dbo._DataHistoryVersions (_MetadataVersionNumber)
  WITH (DROP_EXISTING = OFF, ONLINE = OFF);
</pre>
<p>Deletion cost predictably dropped ~99%.</p>
<p>If you're going to repeat this on your side:</p>
<ol>
<li>Technically this violates the license agreement, you've been warned and all that.</li>
<li>There's a risk the platform will trip over the new indexes during future restructurings (especially on the "new" schema). Better to have a ready script to drop the index, and then (after restructuring) put it back.</li>
</ol></description>
        </item>
        
        <item>
            <title>Myth Buster</title>
            <link>https://kostyanetsky.me/notes/myth-buster</link>
            <guid isPermaLink="false">note-myth-buster</guid>
            <pubDate>Sun, 27 Jul 2025 12:21:32 +0700</pubDate>
            <description><p>I stumbled upon a hefty Infostart <a href="https://infostart.ru/1c/articles/2434171/" target="_blank">article</a> all about "debunking myths" around the platform.</p>
<p>Honestly, about half of it reads like a joke. It's like:</p>
<blockquote>
<p>Hot off the press! Crime, intrigue, investigations! File‑based infobase is faster than client-server! DCS is slower than a plain request! Calling a server method on the server counts as a brand-new server call! <s>UFO over Red Square!</s></p>
</blockquote>
<p>Still, there are some genuinely interesting nuggets! For instance, I'd never heard the claim that cramming your code into one single line makes it run ten times faster. Too bad you'd get your ass handed to you by the team for trying that kind of desperate swag before you even get to celebrate the speed boost. And let's be real — most enterprise app slowdowns usually come from totally different places.</p>
<p>Or take their speed comparison for dumping data into a table: one test for object presentations and another for their descriptions. The presentation dump was literally tens of times slower! On paper, that sounds weird — both are just strings already pulled from the database at measurement time. My guess is it's down to typing: presentation strings can be unlimited length, unlike descriptions. So you get extra memory allocations, helper structures popping up, and bam — that's where the slowdown creeps in.</p>
<p>P.S. I've jotted down some of these points myself before. Off the top of my head — I remember <a href="https://kostyanetsky.me/notes/is-ref-empty" target="_blank">benchmarking</a> ValueIsFilled() and getting a nasty surprise from the built‑in <a href="https://kostyanetsky.me/notes/method-with-surprise" target="_blank">FindByNumber()</a>.</p></description>
        </item>
        
        <item>
            <title>Geometry Deletion</title>
            <link>https://kostyanetsky.me/notes/delete-geometry</link>
            <guid isPermaLink="false">note-delete-geometry</guid>
            <pubDate>Thu, 12 Jun 2025 10:40:43 +0700</pubDate>
            <description><p>I figured out a cool trick for cutting off parts of an object when it intersects with something else. Like, in this gif, there’s a monkey head model in the center, and as a plane moves through it, the part that intersects just disappears.</p>
<p><img alt="Demo" src="https://kostyanetsky.me/notes/delete-geometry/demo.gif"/></p>
<p><a href="https://github.com/vkostyanetsky/3DPlayground/blob/main/Geometry%20Nodes/DeleteGeometry.blend" target="_blank">The idea</a> is pretty simple: you shrink the geometry of the "cutter" object down to a cube, get its min and max coordinates along each axis, and then for every point on the object you're trimming, you check whether it falls within that range. If it does — boom, it gets deleted.</p>
<p>There are tons of ways you could use this. For example, I used it to automatically trim parts of decorative music staff lines on a wall so they wouldn't go across a doorway.</p>
<p><img alt="Example" src="https://kostyanetsky.me/notes/delete-geometry/case.jpg"/></p>
<p>Sure, you could do it by hand, without geometry nodes, but that would kill flexibility. If the wall size, door size, or the angle of the lines changes — you'd have to redo everything from scratch.</p></description>
        </item>
        
        <item>
            <title>No</title>
            <link>https://kostyanetsky.me/notes/no</link>
            <guid isPermaLink="false">note-no</guid>
            <pubDate>Wed, 11 Jun 2025 19:29:33 +0700</pubDate>
            <description><p><img alt="No" src="https://kostyanetsky.me/notes/no/no.jpg"/></p>
<p>This is the message the current platform throws up when you try to connect to an offline server cluster. I do appreciate minimalism in interfaces, of course, but this is definitely over the top.</p>
<p>What's more, the platform is installed with only a single language pack (English) and even launched with a hard override to "Ven VLen", yet somehow the native birches still manage to sprout up. Maybe the C++ library that fires off the message (DataExchangeTcpClientImpl.cpp) is looking at the OS language (Russian) in my case — hard to say.</p>
<p>Anyway, I can't shake the Bugs Bunny vibes every time I see that dialog box.</p>
<p><img alt="No" src="https://kostyanetsky.me/notes/no/bugs-bunny.png"/></p></description>
        </item>
        
        <item>
            <title>The Genie Problem</title>
            <link>https://kostyanetsky.me/notes/hottabych</link>
            <guid isPermaLink="false">note-hottabych</guid>
            <pubDate>Sat, 12 Apr 2025 23:57:12 +0700</pubDate>
            <description><blockquote>
<p>Returning to Volka's room, the old man turned round slyly, snapped the fingers of his left hand, and there appeared on the wall over the aquarium an exact copy of the telephone hanging in the hall.</p>
<p>"Now you can talk to your friends as much as you like without leaving your
own room."</p>
<p>"Golly, thanks a lot!" Volka said gratefully. He removed the receiver, pressed it to his ear and listened. There was no dial tone.</p>
<p>"Hello! Hello!" he shouted. He shook the receiver and then blew into it. Still, there was no dial tone.</p>
<p>"The phone's broken," he explained to Hottabych. "Let's unscrew the receiver and see what's wrong."</p>
<p>However, despite all his efforts, he could not unscrew it.</p>
<p>"It's made of the finest black marble," Hottabych boasted.</p>
<p>"Then there's nothing inside?" Volka asked disappointedly.</p>
<p>"Why, is there supposed to be something inside this, too? Just like in a watch?"</p>
<p>"Now I know why it doesn't work. You've only made a model of a telephone, without anything that's supposed to go inside it. But the insides are the most important part."</p>
<p><em>"The Old Genie Hottabych", Lazar Lagin</em></p>
</blockquote>
<p>When I’m doing 3D modeling, I often feel like that genie. He also tried to mimic the shape of things and jazz them up, but always ended up failing ‘cause he hadn’t got a clue about what was inside.</p>
<p>I’m just the same. For the past month, I’ve been putting the finishing touches on a model of a school music room, and guess what? I’ve learned more about how pianos work than I have in my whole life before. I could even give a quick lecture on heating systems in Russian schools — talking about sectional, panel, cast iron, and aluminum radiators, which types pop up most, the spacing between them, why you shouldn’t hook up three in a row, and so on.</p>
<p>I read about this effect: like when you're drawing, say, samurai armor — you end up inadvertently learning heaps about the properties of leather, the different kinds of metal, and the whole tech stack of the samurai era. I never thought I'd run into that from day one — but hey, I think it's a good thing. It fires up your neural connections, broadens your view of the world, sparks your creativity, and all that jazz.</p>
<p>Plus, it’s way more fun working on a model when you actually know what’s going on under the hood.</p></description>
        </item>
        
        <item>
            <title>Easter Eggs</title>
            <link>https://kostyanetsky.me/notes/easter-eggs</link>
            <guid isPermaLink="false">note-easter-eggs</guid>
            <pubDate>Sun, 06 Apr 2025 23:33:52 +0700</pubDate>
            <description><p><img alt="Thank you, Mario!" src="https://kostyanetsky.me/notes/easter-eggs/mario.jpg"/> <img alt="Awaiting Signal" src="https://kostyanetsky.me/notes/easter-eggs/mothership.jpg"/></p>
<p>A couple of Easter eggs hidden inside FirstBit ERP. They're tucked away for the developers: in the first case, users see just the form title and notification text, while in the second, they see the standard "waiting for connection" message.</p>
<p>I like to add little things like this from time to time — it helps to keep things fun, even when the task isn’t the most exciting or I’m just feeling tired. If you haven’t checked out Bystronovsky’s "<a href="https://collab.ldwg.ru/stressless-design" target="_blank">Design Without Stress</a>", you really should — no way I could explain it better myself.</p>
<p>By the way, here’s another Easter egg! Not from our ERP this time, but from a new tool we’re making for automated database updates. We're building it just for ourselves, so we can joke around with the user a bit :)</p>
<p><img alt="Nice try, Marty!" src="https://kostyanetsky.me/notes/easter-eggs/marty.jpg"/></p></description>
        </item>
        
        <item>
            <title>ERP Development In English</title>
            <link>https://kostyanetsky.me/notes/across-meeting</link>
            <guid isPermaLink="false">note-across-meeting</guid>
            <pubDate>Sun, 19 Jan 2025 23:54:12 +0700</pubDate>
            <description><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/mZwHTbu285A" width="560"></iframe>
<p>Our lead developer recently shared some insights about our work — specifically, developing ERP systems on 1C for the UAE and, more recently, Saudi Arabia. The session was hosted by the online English school Across, so the audience was spot-on: Russian-speaking folks interested in building careers and exploring international markets.</p>
<p>Overall, it turned out pretty cool, especially as a language practice. Just a reminder: learning foreign languages is still one of the best ways to give your brain a workout, and it’s also super accessible. There’s no shortage of resources, communities, and interest-based clubs out there — you just need the motivation :)</p></description>
        </item>
        
    </channel>
</rss>